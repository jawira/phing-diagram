#!/usr/bin/env php
<?php
try {
    include __DIR__ . '/../vendor/autoload.php';

    $options = getopt('i:o:f:', ['input:', 'output:', 'format:']);

    $input  = $options['i'] ?? $options['input'] ?? null;
    $output = $options['o'] ?? $options['output'] ?? null;
    $format = $options['f'] ?? $options['format'] ?? null;

    $diagram = new Jawira\PhingVisualizer\Diagram($input);
    $diagram->save($format, $output);
} catch (Throwable $th) {
    exit(sprintf('%s: %s%s', get_class($th), $th->getMessage(), PHP_EOL));
}
